<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ST Duty Status • HKT </title>
  <style>
    :root {
      --bg: #0f172a;
      --text: #e2e8f0;
      --accent: #38bdf8;
      --green: #22c55e;
      --yellow: #eab308;
      --orange: #f97316;
      --red: #ef4444;
      --muted: #94a3b8;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      text-align: center;
    }
    .container {
      max-width: 1200px;
      width: 100%;
    }
    .clock {
      font-size: 10rem;
      font-weight: 700;
      letter-spacing: 10px;
      color: var(--text);
      margin: 1rem 0 1.5rem;
      font-variant-numeric: tabular-nums;
      text-shadow: 0 10px 40px rgba(0,0,0,0.7);
    }
    .notice {
      font-size: 4.5rem;
      font-weight: 800;
      padding: 1.2rem 3rem;
      border-radius: 24px;
      margin: 0 0 3rem;
      min-width: 700px;
      box-shadow: 0 12px 45px rgba(0,0,0,0.6);
      line-height: 1.2;
      display: none;
    }
    .notice.lunch { background: var(--yellow); color: #000; display: inline-block; }
    .notice.off   { background: var(--red);    color: #fff; display: inline-block; }

    .staff-container {
      margin: 3rem 0 6rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 3rem 2.8rem;
      max-width: 1200px;
    }
    .staff-member {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 220px;
    }
    .staff-icon {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      object-fit: cover;
      border: 6px solid transparent;
      transition: all 0.35s ease;
      cursor: pointer;
      filter: grayscale(100%) opacity(0.6);
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    }
    .staff-icon.active {
      filter: grayscale(0%) opacity(1);
      box-shadow: 0 16px 50px rgba(34,197,94,0.7);
      transform: scale(1.1);
    }
    .staff-icon:hover {
      transform: scale(1.14);
    }
    .staff-status {
      margin-top: 1.3rem;
      font-size: 1.4rem;
      font-weight: 700;
      padding: 0.9rem 1.5rem;
      border-radius: 20px;
      background: rgba(0,0,0,0.5);
      min-width: 160px;
      text-align: center;
      letter-spacing: 0.8px;
    }
    .status-on-duty  { background: var(--green);  color: #000; }
    .status-onsite   { background: var(--yellow); color: #000; }
    .status-off      { background: var(--red);    color: #fff; }
    .status-break    { background: var(--orange); color: #fff; }

    .staff-name {
      margin-top: 0.6rem;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--muted);
      opacity: 0.9;
      letter-spacing: 0.5px;
    }

    footer {
      margin-top: auto;
      padding: 5rem 0 2rem;
      visibility: hidden;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="clock" id="live-clock">00:00:00</div>
  <div class="notice" id="notice"></div>

  <div class="staff-container" id="staff-container"></div>
</div>

<footer></footer>

<script>
// Live HK clock + notice + auto-reset staff status
let lastAutoReset = '';

function updateDisplay() {
  const now = new Date();
  const hkTime = now.toLocaleString('en-US', {
    timeZone: 'Asia/Hong_Kong',
    hour12: false,
    hour: '2-digit',
    minute: '2-digit',
    second: '2-digit'
  });
  const [hh, mm, ss] = hkTime.split(':').map(Number);
  const hour = hh;
  const minute = mm;

  const timeStr = `${String(hour).padStart(2,'0')}:${String(minute).padStart(2,'0')}:${String(ss).padStart(2,'0')}`;
  document.getElementById('live-clock').textContent = timeStr;

  const currentMinutes = hour * 60 + minute;
  const noticeEl = document.getElementById('notice');

  if (currentMinutes >= 12*60 + 30 && currentMinutes <= 13*60 + 30) {
    noticeEl.textContent = 'LUNCH TIME';
    noticeEl.className = 'notice lunch';
  }
  else if (currentMinutes >= 18*60 + 29 && currentMinutes <= 19*60 + 0) {
    noticeEl.textContent = 'B OFF DUTY, C add oil... hahah';
    noticeEl.className = 'notice off';
  }
  else {
    noticeEl.textContent = '';
    noticeEl.className = 'notice';
  }

  // Auto-reset at key times (once per crossing)
  const todayKey = now.toLocaleDateString('en-US', { timeZone: 'Asia/Hong_Kong' });

  if (currentMinutes >= 7*60 && currentMinutes < 7*60 + 1) {
    if (lastAutoReset !== todayKey + '-07:00') {
      resetAllStaff(2); // Off
      lastAutoReset = todayKey + '-07:00';
    }
  }
  else if (currentMinutes >= 12*60 + 30 && currentMinutes < 12*60 + 31) {
    if (lastAutoReset !== todayKey + '-12:30') {
      resetAllStaff(3); // Break
      lastAutoReset = todayKey + '-12:30';
    }
  }
  else if (currentMinutes >= 13*60 + 30 && currentMinutes < 13*60 + 31) {
    if (lastAutoReset !== todayKey + '-13:30') {
      resetAllStaff(0); // On duty
      lastAutoReset = todayKey + '-13:30';
    }
  }
  else if (currentMinutes >= 18*60 + 30 && currentMinutes < 18*60 + 31) {
    if (lastAutoReset !== todayKey + '-18:30') {
      resetAllStaff(2); // Off
      lastAutoReset = todayKey + '-18:30';
    }
  }
}

function resetAllStaff(targetStateIndex) {
  const members = document.querySelectorAll('.staff-member');
  members.forEach((member, i) => {
    staffStates[i] = targetStateIndex;
    const state = statusCycle[targetStateIndex];
    const statusText = member.querySelector('.staff-status');
    statusText.textContent = state.text;
    statusText.className = 'staff-status ' + state.class;
    const img = member.querySelector('.staff-icon');
    img.classList.toggle('active', state.active);
  });
}

// Staff logic with names
const staffCount = 7;
const staffStates = new Array(staffCount).fill(2); // start with Off

const staffNames = [
  "Carson CHEUNG",      // 001.png
  "Tommy CHENG",    // 002.png ← your name
  "Nick TSANG",
  "Hans AU",
  "Gorden LI",
  "Tony SO",
  "Tommy WONG"
];

const statusCycle = [
  { text: 'On duty',  class: 'status-on-duty',  active: true  },
  { text: 'Onsite',   class: 'status-onsite',   active: true  },
  { text: 'Off',      class: 'status-off',      active: false },
  { text: 'Break',    class: 'status-break',    active: true  }
];

function initStaffIcons() {
  const container = document.getElementById('staff-container');
  container.innerHTML = '';

  for (let i = 0; i < staffCount; i++) {
    const member = document.createElement('div');
    member.className = 'staff-member';

    const img = document.createElement('img');
    img.src = `${String(i+1).padStart(3, '0')}.gif`;
    img.alt = staffNames[i];
    img.className = 'staff-icon';
    img.dataset.index = i;

    const statusText = document.createElement('div');
    statusText.className = 'staff-status';
    const initialState = statusCycle[staffStates[i]];
    statusText.textContent = initialState.text;
    statusText.classList.add(initialState.class);

    const nameText = document.createElement('div');
    nameText.className = 'staff-name';
    nameText.textContent = staffNames[i];

    if (initialState.active) {
      img.classList.add('active');
    }

    member.appendChild(img);
    member.appendChild(statusText);
    member.appendChild(nameText);

    member.onclick = () => {
      const idx = parseInt(img.dataset.index);
      staffStates[idx] = (staffStates[idx] + 1) % 4;
      const state = statusCycle[staffStates[idx]];
      statusText.textContent = state.text;
      statusText.className = 'staff-status ' + state.class;
      img.classList.toggle('active', state.active);
    };

    container.appendChild(member);
  }
}

setInterval(updateDisplay, 1000);
updateDisplay();
initStaffIcons();
</script>
</body>
</html>




